# Zephyr STD C++ API support - Required by the Herald API
CONFIG_CPLUSPLUS=y
CONFIG_NEWLIB_LIBC=y
CONFIG_LIB_CPLUSPLUS=y

# Optimisations
CONFIG_SIZE_OPTIMIZATIONS=y

# Allow GATT service discovery to use k_malloc
CONFIG_HEAP_MEM_POOL_SIZE=2048

# nRF52840/nRF9160/nRF53x specific defines ONLY - See https://developer.nordicsemi.com/nRF_Connect_SDK/doc/latest/nrf/drivers/entropy_cc310.html
# SECURITY NOTE: Required for HW Entropy RNG on nRF CC3xx capable boards
CONFIG_NRF_CC3XX_PLATFORM=y
CONFIG_NORDIC_SECURITY_BACKEND=y
# CONFIG_BT_LL_NRFXLIB_VS_INCLUDE=y
# CONFIG_BT_LL_NRFXLIB_DEFAULT=y
# NOTE: Also see https://devzone.nordicsemi.com/f/nordic-q-a/66899/nrf52840-nrf-connect-sdk-zephyr-random-number-generation
# Thus 'CONFIG_ENTROPY_GENERATOR' uses the nRF5 RNG, NOT the CryptoCell CC310 RNG
# BLe by default uses the RNG in nRF5, not the CC310 one. So our crypto functions need to ensure they use the cryptocell where available (the above 2 boards)

# BEGIN DEBUG ONLY SETTINGS - NOT FOR PRODUCTION
CONFIG_GPIO=y
#CONFIG_STDOUT_CONSOLE=y
CONFIG_USB=y
##CONFIG_USB_DEVICE_STACK=y
##CONFIG_USB_DEVICE_PRODUCT="Herald USB Logging Device"
##CONFIG_USB_UART_CONSOLE=y

##CONFIG_UART_INTERRUPT_DRIVEN=y
##CONFIG_UART_LINE_CTRL=y
##CONFIG_UART_CONSOLE_ON_DEV_NAME="CDC_ACM_0"

#CONFIG_DEBUG_OPTIMIZATIONS=y

#CONFIG_USE_SEGGER_RTT=y
#CONFIG_RTT_CONSOLE=y
CONFIG_UART_CONSOLE=n
#CONFIG_LOG_BACKEND_RTT=y
#CONFIG_LOG_BACKEND_RTT_MODE_BLOCK=y
# More settings here https://devzone.nordicsemi.com/f/nordic-q-a/59759/clear-example-using-segger-rtt-on-zephyr-with-ses-and-nrf5340-pdk

#CONFIG_SERIAL=y

##CONFIG_LOG=y
##CONFIG_BT_DEBUG_LOG=y
#CONFIG_LOG_BACKEND_UART=y
##CONFIG_LOG_DEFAULT_LEVEL=3
CONFIG_LOG_STRDUP_BUF_COUNT=500
CONFIG_LOG_STRDUP_MAX_STRING=160
##CONFIG_LOG_MODE_NO_OVERFLOW=y
# ^ Allows earlier log messages to not be dropped - likely more useful in debugging
#CONFIG_LOG_IMMEDIATE=y DOESNT WORK EVER
  # DEBUG
# END DEBUG ONLY SETTINGS




CONFIG_LOG_DEFAULT_LEVEL=3
CONFIG_CONSOLE=y
CONFIG_CONSOLE_INPUT_MAX_LINE_LEN=128
#CONFIG_CONSOLE_HAS_DRIVER=y

CONFIG_RTT_CONSOLE=y
##CONFIG_RTT_TX_RETRY_CNT=2
##CONFIG_RTT_TX_RETRY_DELAY_MS=2
#CONFIG_HAS_SEGGER_RTT=y
CONFIG_USE_SEGGER_RTT=y
##CONFIG_SEGGER_RTT_MAX_NUM_UP_BUFFERS=3
##CONFIG_SEGGER_RTT_MAX_NUM_DOWN_BUFFERS=3
##CONFIG_SEGGER_RTT_BUFFER_SIZE_UP=1024
##CONFIG_SEGGER_RTT_BUFFER_SIZE_DOWN=16
##CONFIG_SEGGER_RTT_PRINTF_BUFFER_SIZE=64
##CONFIG_SEGGER_RTT_MODE_NO_BLOCK_SKIP=y
#CONFIG_SEGGER_RTT_MODE=0
CONFIG_LOG_BACKEND_RTT=y
# CONFIG_LOG_BACKEND_RTT_MODE_DROP is not set
##CONFIG_LOG_BACKEND_RTT_MODE_BLOCK=y
##CONFIG_LOG_BACKEND_RTT_OUTPUT_BUFFER_SIZE=16
##CONFIG_LOG_BACKEND_RTT_RETRY_CNT=4
##CONFIG_LOG_BACKEND_RTT_RETRY_DELAY_MS=5
##CONFIG_LOG_BACKEND_RTT_BUFFER=0
#CONFIG_LOG_BACKEND_RTT_FORCE_PRINTK=y
# CONFIG_LOG_BACKEND_RB is not set
CONFIG_LOG_BACKEND_SHOW_COLOR=y
CONFIG_LOG_BACKEND_FORMAT_TIMESTAMP=y
CONFIG_LOG_PRINTK=y
CONFIG_LOG=y
CONFIG_LOG_MAX_LEVEL=4







# BEGIN PRODUCTION ONLY SETTINGS - NOT FOR DEVELOPMENT
# CONFIG_LOG_DEFAULT_LEVEL=0
#   OFF - See herald/zephyr_context.cpp
# Note in Zephyr all bool options are n unless enabled, so no need to define them explicitly
#CONFIG_DEBUG=n
#CONFIG_BOOT_BANNER=n
#CONFIG_SPI=n
#CONFIG_GPIO=n
  # Used by USB but not necessary in prod unless there are GPIO peripherals
# END PRODUCTION ONLY SETTINGS

# Incresed stack due to settings API usage
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=2048

CONFIG_BT=y
CONFIG_BT_DEBUG_LOG=y
CONFIG_BT_HCI=y
#CONFIG_BT_WAIT_NOP=y
# ^ Causes initialisation of BT HCI interface to fail
CONFIG_BT_DEBUG_HCI_CORE=y
CONFIG_BT_PERIPHERAL=y
CONFIG_BT_CENTRAL=y
CONFIG_BT_SMP=y
CONFIG_BT_SCAN=y
CONFIG_BT_SIGNING=n
CONFIG_BT_DIS=y
CONFIG_BT_ATT_PREPARE_COUNT=5
CONFIG_BT_BAS=y
CONFIG_BT_HRS=n
CONFIG_BT_PRIVACY=y
# ^ Public MAC address rotation and randomness (note: On nRF boards this uses nRF5 RNG, not cryptocell RNG)
CONFIG_BT_DEVICE_NAME="Herald Wearable"
CONFIG_BT_DEVICE_APPEARANCE=833
CONFIG_BT_DEVICE_NAME_DYNAMIC=n
CONFIG_BT_MAX_CONN=20
CONFIG_BT_RPA_TIMEOUT=30000
CONFIG_BT_DEBUG_RPA=y
#CONFIG_BT_DEVICE_NAME_MAX=65

# GATT Client settings
CONFIG_BT_GATT_CLIENT=y
CONFIG_BT_GATT_DM=y

# From DM sample - effect TBD

CONFIG_BT_L2CAP_TX_BUF_COUNT=5




CONFIG_BT_KEYS_OVERWRITE_OLDEST=y
CONFIG_BT_SETTINGS=y
#CONFIG_FLASH=y
#CONFIG_FLASH_PAGE_LAYOUT=y
#CONFIG_FLASH_MAP=y
#CONFIG_NVS=y
CONFIG_SETTINGS=y

#CONFIG_BT_HCI_ACL_FLOW_CONTROL=n
# ^ https://docs.zephyrproject.org/2.3.0/guides/bluetooth/bluetooth-dev.html
# ^ https://lists.zephyrproject.org/g/devel/topic/running_bluetooth_examples/16760678?p=